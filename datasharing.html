<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>How to share data to avoid misunderstanding </title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="How to share data to avoid misunderstanding "/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2014-01-18T02:32+1100"/>
<meta name="author" content="Ivan Hanigan"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">How to share data to avoid misunderstanding </h1>


<hr/>




<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Index</a></li>
<li><a href="#sec-2">2 Introduction</a></li>
<li><a href="#sec-3">3 Ethics</a>
<ul>
<li><a href="#sec-3-1">3.1 Responsibility</a></li>
<li><a href="#sec-3-2">3.2 Data sharing code of conduct</a>
<ul>
<li><a href="#sec-3-2-1">3.2.1 Identifying Errors (miscalculations or methodological)</a></li>
<li><a href="#sec-3-2-2">3.2.2 Uncovering Fraud</a></li>
<li><a href="#sec-3-2-3">3.2.3 Strike gold? Share the wealth!</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-4">4 Least Publishable Units (LPU)</a></li>
<li><a href="#sec-5">5 Data Provider</a>
<ul>
<li>
<ul>
<li><a href="#sec-5-1">5.1 What you should deliver</a></li>
<li><a href="#sec-5-2">5.2 The raw data</a></li>
<li><a href="#sec-5-3">5.3 The tidy data set</a></li>
<li><a href="#sec-5-4">5.4 The code book</a></li>
<li><a href="#sec-5-5">5.5 How to code variables</a></li>
<li><a href="#sec-5-6">5.6 The instruction list/script</a></li>
</ul>
</li>
<li><a href="#sec-5-1">5.1 What you should expect from the analyst</a></li>
</ul>
</li>
<li><a href="#sec-6">6 Data Receiver</a>
<ul>
<li><a href="#sec-6-1">6.1 Data sharing code of conduct</a></li>
<li><a href="#sec-6-2">6.2 Respond quickly, engage deepy</a></li>
<li><a href="#sec-6-3">6.3 Exploratory Data Analysis</a></li>
<li><a href="#sec-6-4">6.4 Re-structuring the data to fit a schema</a></li>
</ul>
</li>
<li><a href="#sec-7">7 Acknowledgements</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Index</h2>
<div class="outline-text-2" id="text-1">




<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">--- </span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">index</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: Index</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

This is a guide for anyone who needs to share data with another analyst and wants to avoid the other person misunderstanding the data.

<span style="color: #268bd2; font-weight: bold;">####</span> <span style="color: #859900; font-weight: bold;">[Introduction]</span><span style="color: #2aa198;">(/datasharing/introduction)</span>

<span style="color: #268bd2; font-weight: bold;">####</span> <span style="color: #859900; font-weight: bold;">[Ethics]</span><span style="color: #2aa198;">(/datasharing/responsibility)</span>
 
<span style="color: #268bd2; font-weight: bold;">###</span> <span style="color: #859900; font-weight: bold;">[Least Publishable Units (LPU)]</span><span style="color: #2aa198;">(/datasharing/least-publishable-units)</span><span style="color: #268bd2; font-weight: bold; text-decoration: underline;">  </span>

<span style="color: #268bd2; font-weight: bold;">####</span> <span style="color: #859900; font-weight: bold;">[The Data provider]</span><span style="color: #2aa198;">(/datasharing/the-data-provider)</span>

<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[What you should deliver]</span><span style="color: #2aa198;">(/datasharing/what-you-should-deliver)</span>
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[The raw data]</span><span style="color: #2aa198;">(/datasharing/the-raw-data)</span>
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[The tidy data set]</span><span style="color: #2aa198;">(/datasharing/the-tidy-data-set)</span>
    <span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[Missing data]</span><span style="color: #2aa198;">(/datasharing/missing-data)</span>
    <span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[Standards and Conventions]</span><span style="color: #2aa198;">(/datasharing/standards-and-conventions)</span>
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[The code book]</span><span style="color: #2aa198;">(/datasharing/the-code-book)</span>
    <span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[How to code variables]</span><span style="color: #2aa198;">(/datasharing/how-to-code-variables)</span>
    <span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[Variable Names]</span><span style="color: #2aa198;">(/datasharing/variable-names)</span>
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[The instructions script]</span><span style="color: #2aa198;">(/datasharing/the-instructions-script)</span>
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[What you should expect from the Receiver]</span><span style="color: #2aa198;">(what-to-expect-from-the-analyst)</span>

<span style="color: #268bd2; font-weight: bold;">####</span> <span style="color: #859900; font-weight: bold;">[The Data Receiver]</span><span style="color: #2aa198;">(/datasharing/the-data-receiver)</span>
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[Data sharing code of conduct]</span><span style="color: #2aa198;">(/datasharing/responsibility)</span>
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[Respond quickly, engage deeply]</span><span style="color: #2aa198;">(index)</span>
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[Exploratory Data Analysis]</span><span style="color: #2aa198;">(/datasharing/eda)</span>
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[Re-structuring the data to fit a schema]</span><span style="color: #2aa198;">(restructuring-the-data)</span><span style="color: #268bd2; font-weight: bold; text-decoration: underline;">  </span>

<span style="color: #268bd2; font-weight: bold;">####</span> <span style="color: #859900; font-weight: bold;">[Acknowledgements]</span><span style="color: #2aa198;">(/datasharing/acknowledgements)</span>



</pre>


</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Introduction</h2>
<div class="outline-text-2" id="text-2">




<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">--- </span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">introduction</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: Introduction</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

This is a guide for anyone who needs to share data with another analyst and wants to avoid the other person misunderstanding the data. This is based on the original by Jeff Leek at [[<span style="color: #859900; font-weight: bold;">https://github.com/jtleek/datasharing</span>]].  The following is a working document in which I will modify the original words to suit my own purposes (and hopefully are generalisable for others too).  For now the following is still the original. 

The target audiences in mind are:

<span style="color: #268bd2; font-style: italic;">-</span> Scientific collaborators who need statisticians to analyze data for them
<span style="color: #268bd2; font-style: italic;">-</span> Students or postdocs in scientific disciplines looking for consulting advice
<span style="color: #268bd2; font-style: italic;">-</span> Junior statistics students whose job it is to collate/clean data sets

The goals of this guide are to provide some instruction on the best way to share data to avoid the most common pitfalls
and sources of delay in the transition from data collection to data analysis. 

The original author of this material is <span style="color: #859900; font-weight: bold;">[Jeff Leek]</span><span style="color: #2aa198;">(https://github.com/jtleek/datasharing)</span> who says:<span style="color: #268bd2; font-weight: bold; text-decoration: underline;">  </span>
<span style="color: #268bd2; font-style: italic;">_My_</span> group works with a large
number of collaborators and the number one source of variation in the speed to results is the status of the data
when they arrive at the Leek group. Based on my conversations with other statisticians this is true nearly universally.

My strong feeling is that statisticians should be able to handle the data in whatever state they arrive. It is important
to see the raw data, understand the steps in the processing pipeline, and be able to incorporate hidden sources of
variability in one's data analysis. On the other hand, for many data types, the processing steps are well documented
and standardized. So the work of converting the data from raw form to directly analyzable form can be performed 
before calling on a statistician. This can dramatically speed the turnaround time, since the statistician doesn't
have to work through all the pre-processing steps first. 

</pre>


</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Ethics</h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Responsibility</h3>
<div class="outline-text-3" id="text-3-1">



</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Data sharing code of conduct</h3>
<div class="outline-text-3" id="text-3-2">


</div>

<div id="outline-container-3-2-1" class="outline-4">
<h4 id="sec-3-2-1"><span class="section-number-4">3.2.1</span> Identifying Errors (miscalculations or methodological)</h4>
<div class="outline-text-4" id="text-3-2-1">

</div>

</div>

<div id="outline-container-3-2-2" class="outline-4">
<h4 id="sec-3-2-2"><span class="section-number-4">3.2.2</span> Uncovering Fraud</h4>
<div class="outline-text-4" id="text-3-2-2">

</div>

</div>

<div id="outline-container-3-2-3" class="outline-4">
<h4 id="sec-3-2-3"><span class="section-number-4">3.2.3</span> Strike gold? Share the wealth!</h4>
<div class="outline-text-4" id="text-3-2-3">

</div>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Least Publishable Units (LPU)</h2>
<div class="outline-text-2" id="text-4">





<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">--- </span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">least-publishable-units</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: Least Publishable Units (LPU)</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

<span style="color: #268bd2; font-style: italic;">-</span> The concept of Least Publishable Units (LPU) allows us to compartmentalise portions of data collections into a subcollection called the LPU (also 'the dataset'). 
<span style="color: #268bd2; font-style: italic;">-</span> Each LPU may contain more than one data file that are logically, scientifically or thematically
related. 
<span style="color: #268bd2; font-style: italic;">-</span> A LPU may need to be constructed from merging or modification of the existing files

</pre>


</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Data Provider</h2>
<div class="outline-text-2" id="text-5">


</div>

<div id="outline-container-5-1" class="outline-4">
<h4 id="sec-5-1"><span class="section-number-4">5.1</span> What you should deliver</h4>
<div class="outline-text-4" id="text-5-1">




<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">what-you-should-deliver</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: what-you-should-deliver</span>
<span style="color: #268bd2; font-weight: bold;">---</span>



For maximum speed in the analysis this is the information you should pass to a statistician:

<span style="color: #268bd2; font-style: italic;">1.</span> The raw data.
<span style="color: #268bd2; font-style: italic;">2.</span> A <span style="color: #859900; font-weight: bold;">[tidy data set]</span><span style="color: #2aa198;">(http://vita.had.co.nz/papers/tidy-data.pdf)</span> 
<span style="color: #268bd2; font-style: italic;">3.</span> A code book describing each variable and its values in the tidy data set.<span style="color: #268bd2; font-weight: bold; text-decoration: underline;">  </span>
<span style="color: #268bd2; font-style: italic;">4.</span> An explicit and exact recipe you used to go from 1 -&gt; 2,3 


    
</pre>


</div>

</div>

<div id="outline-container-5-2" class="outline-4">
<h4 id="sec-5-2"><span class="section-number-4">5.2</span> The raw data</h4>
<div class="outline-text-4" id="text-5-2">




<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">the-raw-data</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: the-raw-data</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

    

It is critical that you include the rawest form of the data that you have access to. Here are some examples of the
raw form of data:

<span style="color: #268bd2; font-style: italic;">-</span> The strange <span style="color: #859900; font-weight: bold;">[binary file]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Binary_file)</span> your measurement machine spits out
<span style="color: #268bd2; font-style: italic;">-</span> The unformatted Excel file with 10 worksheets the company you contracted with sent you
<span style="color: #268bd2; font-style: italic;">-</span> The complicated <span style="color: #859900; font-weight: bold;">[JSON]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/JSON)</span> data you got from scraping the <span style="color: #859900; font-weight: bold;">[Twitter API]</span><span style="color: #2aa198;">(https://twitter.com/twitterapi)</span>
<span style="color: #268bd2; font-style: italic;">-</span> The hand-entered numbers you collected looking through a microscope

You know the raw data is in the right format if you: 

<span style="color: #268bd2; font-style: italic;">1.</span> Ran no software on the data
<span style="color: #268bd2; font-style: italic;">1.</span> Did not manipulate any of the numbers in the data
<span style="color: #268bd2; font-style: italic;">1.</span> You did not remove any data from the data set
<span style="color: #268bd2; font-style: italic;">1.</span> You did not summarize the data in any way

If you did any manipulation of the data at all it is not the raw form of the data. Reporting manipulated data
as raw data is a very common way to slow down the analysis process, since the analyst will often have to do a
forensic study of your data to figure out why the raw data looks weird. 
</pre>


</div>

</div>

<div id="outline-container-5-3" class="outline-4">
<h4 id="sec-5-3"><span class="section-number-4">5.3</span> The tidy data set</h4>
<div class="outline-text-4" id="text-5-3">

<ul>
<li id="sec-5-3-1">The tidy dataset in general<br/>



<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">the-tidy-data-set</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: the-tidy-data-set</span>
<span style="color: #268bd2; font-weight: bold;">---</span>


The general principles of tidy data are laid out by <span style="color: #859900; font-weight: bold;">[Hadley Wickham]</span><span style="color: #2aa198;">(http://had.co.nz/)</span> in <span style="color: #859900; font-weight: bold;">[this paper]</span><span style="color: #2aa198;">(http://vita.had.co.nz/papers/tidy-data.pdf)</span>
and <span style="color: #859900; font-weight: bold;">[this video]</span><span style="color: #2aa198;">(http://vimeo.com/33727555)</span>. The paper and the video are both focused on the <span style="color: #859900; font-weight: bold;">[R]</span><span style="color: #2aa198;">(http://www.r-project.org/)</span> package, which you
may or may not know how to use. Regardless the four general principles you should pay attention to are:

<span style="color: #268bd2; font-style: italic;">1.</span> Each variable you measure should be in one column
<span style="color: #268bd2; font-style: italic;">1.</span> Each different observation of that variable should be in a different row
<span style="color: #268bd2; font-style: italic;">1.</span> There should be one table for each "kind" of variable
<span style="color: #268bd2; font-style: italic;">1.</span> If you have multiple tables, they should include a column in the table that allows them to be linked

While these are the hard and fast rules, there are a number of other things that will make your data set much easier
to handle. First is to include a row at the top of each data table/spreadsheet that contains full row names. 
So if you measured age at diagnosis for patients, you would head that column with the name <span style="color: #268bd2; font-weight: bold;">`AgeAtDiagnosis`</span> instead
of something like <span style="color: #268bd2; font-weight: bold;">`ADx`</span> or another abbreviation that may be hard for another person to understand. 


Here is an example of how this would work from genomics. Suppose that for 20 people you have collected gene expression measurements with 
<span style="color: #859900; font-weight: bold;">[RNA-sequencing]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/RNA-Seq)</span>. You have also collected demographic and clinical information
about the patients including their age, treatment, and diagnosis. You would have one table/spreadsheet that contains the clinical/demographic
information. It would have four columns (patient id, age, treatment, diagnosis) and 21 rows (a row with variable names, then one row
for every patient). You would also have one spreadsheet for the summarized genomic data. Usually this type of data
is summarized at the level of the number of counts per exon. Suppose you have 100,000 exons, then you would have a
table/spreadsheet that had 21 rows (a row for gene names, and one row for each patient) and 100,001 columns (one row for patient
ids and one row for each data type). 

If you are sharing your data with the collaborator in Excel, the tidy data should be in one Excel file per table. They
should not have multiple worksheets, no macros should be applied to the data, and no columns/cells should be highlighted. 
Alternatively share the data in a <span style="color: #859900; font-weight: bold;">[CSV]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Comma-separated_values)</span> or <span style="color: #859900; font-weight: bold;">[TAB-delimited]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Tab-separated_values)</span> text file.
    
</pre>


</li>
</ul>
<ul>
<li id="sec-5-3-2">Missing data<br/>



<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">missing-data</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: Missing data</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

<span style="color: #268bd2; font-weight: bold;">####</span> <span style="color: #268bd2; font-weight: bold;">TODO</span>
<span style="color: #268bd2; font-style: italic;">-</span> Using NA, NULL, NaN appropriately
<span style="color: #268bd2; font-style: italic;">-</span> Arguments for -9999 etc
<span style="color: #268bd2; font-style: italic;">-</span> What is the attitude to blank fields (columns) in data?
<span style="color: #268bd2; font-style: italic;">-</span> There a possibility that Data Providers will want to perturb data, e.g.
longitude and latitude so that the location of a site cannot be
identified explicitly?
    
</pre>

</li>
</ul>
<ul>
<li id="sec-5-3-3">Standards and Conventions<br/>



<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">standards-and-conventions</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: standards-and-conventions</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

<span style="color: #268bd2; font-weight: bold;">####</span> <span style="color: #268bd2; font-weight: bold;">TODO</span>
<span style="color: #268bd2; font-style: italic;">-</span> Is there an expectation that Data Providers will use SI units?  <span style="color: #268bd2; font-weight: bold; text-decoration: underline;">  </span>

</pre>


</li>
</ul>
<ul>
<li id="sec-5-3-4">Punctuation<br/>
ie Horsfield's Bush Lark Vs Horsfields Bush Lark
</li>
</ul>
<ul>
<li id="sec-5-3-5">Typographical Error<br/>
Rainforest Species Vs Rainforest species
</li>
</ul>
<ul>
<li id="sec-5-3-6">Synonyms<br/>
Blue Blistering Barnacles Vs Blue Bistering Barnacles
</li>
</ul>
</div>

</div>

<div id="outline-container-5-4" class="outline-4">
<h4 id="sec-5-4"><span class="section-number-4">5.4</span> The code book</h4>
<div class="outline-text-4" id="text-5-4">




<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">the-code-book</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: the-code-book</span>
<span style="color: #268bd2; font-weight: bold;">---</span>


For almost any data set, the measurements you calculate will need to be described in more detail than you will sneak
into the spreadsheet. The code book contains this information. At minimum it should contain:

<span style="color: #268bd2; font-style: italic;">1.</span> Information about the variables (including units!) in the data set not contained in the tidy data 
<span style="color: #268bd2; font-style: italic;">1.</span> Information about the summary choices you made
<span style="color: #268bd2; font-style: italic;">1.</span> Information about the experimental study design you used

In our genomics example, the analyst would want to know what the unit of measurement for each
clinical/demographic variable is (age in years, treatment by name/dose, level of diagnosis and how heterogeneous). They 
would also want to know how you picked the exons you used for summarizing the genomic data (UCSC/Ensembl, etc.). They
would also want to know any other information about how you did the data collection/study design. For example,
are these the first 20 patients that walked into the clinic? Are they 20 highly selected patients by some characteristic
like age? Are they randomized to treatments? 

A common format for this document is a Word file. There should be a section called "Study design" that has a thorough
description of how you collected the data. There is a section called "Code book" that describes each variable and its
units. 
    
</pre>


</div>

</div>

<div id="outline-container-5-5" class="outline-4">
<h4 id="sec-5-5"><span class="section-number-4">5.5</span> How to code variables</h4>
<div class="outline-text-4" id="text-5-5">

<ul>
<li id="sec-5-5-1">How to code variables in general<br/>



<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">how-to-code-variables</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: how-to-code-variables</span>
<span style="color: #268bd2; font-weight: bold;">---</span>


When you put variables into a spreadsheet there are several main categories you will run into depending on their <span style="color: #859900; font-weight: bold;">[data type]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Statistical_data_type)</span>:

<span style="color: #268bd2; font-style: italic;">1.</span> Continuous
<span style="color: #268bd2; font-style: italic;">1.</span> Ordinal
<span style="color: #268bd2; font-style: italic;">1.</span> Categorical
<span style="color: #268bd2; font-style: italic;">1.</span> Missing 
<span style="color: #268bd2; font-style: italic;">1.</span> Censored

Continuous variables are anything measured on a quantitative scale that could be any fractional number. An example
would be something like weight measured in kg. 

<span style="color: #859900; font-weight: bold;">[Ordinal data]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Ordinal_data)</span> are data that have a fixed, small (&lt; 100) number of levels but are ordered. 
This could be for example survey responses where the choices are: poor, fair, good. 

<span style="color: #859900; font-weight: bold;">[Categorical data]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Categorical_variable)</span> are data where there
are multiple categories, but they aren't ordered. One example would be sex: male or female. 

<span style="color: #859900; font-weight: bold;">[Missing data]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Missing_data)</span> are data
that are missing and you don't know the mechanism. You should code missing values as <span style="color: #268bd2; font-weight: bold;">`NA`</span>. 

<span style="color: #859900; font-weight: bold;">[Censored data]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Censoring_(statistics\)</span>) are data
where you know the missingness mechanism on some level. Common examples are a measurement being below a detection limit
or a patient being lost to follow-up. They should also be coded as <span style="color: #268bd2; font-weight: bold;">`NA`</span> when you don't have the data. But you should
also add a new column to your tidy data called, "VariableNameCensored" which should have values of <span style="color: #268bd2; font-weight: bold;">`TRUE`</span> if censored 
and <span style="color: #268bd2; font-weight: bold;">`FALSE`</span> if not. In the code book you should explain why those values are missing. It is absolutely critical to report
to the analyst if there is a reason you know about that some of the data are missing. You should also not <span style="color: #859900; font-weight: bold;">[impute]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Imputation_(statistics\)</span>)/make up/
throw away missing observations.

<span style="color: #268bd2; font-style: italic;">-</span> TODO truncated?

In general, try to avoid coding categorical or ordinal variables as numbers. When you enter the value for sex in the tidy
data, it should be "male" or "female". The ordinal values in the data set should be "poor", "fair", and "good" not 1, 2 ,3.
This will avoid potential mixups about which direction effects go and will help identify coding errors. 

Always encode every piece of information about your observations using text. For example, if you are storing data in Excel and use a form of colored text or cell background formatting to indicate information about an observation ("red variable entries were observed in experiment 1.") then this information will not be exported (and will be lost!) when the data is exported as raw text.  Every piece of data should be encoded as actual text that can be exported.<span style="color: #268bd2; font-weight: bold; text-decoration: underline;">  </span>
    
</pre>


</li>
</ul>
<ul>
<li id="sec-5-5-2">Variable Names<br/>



<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">variable-names</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: variable-names</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

This comes from <span style="color: #859900; font-weight: bold;">[Josh Reich's blog]</span><span style="color: #2aa198;">(http://blog.i2pi.com/post/52812976752/joshs-postgresql-database-conventions)</span>:

<span style="color: #268bd2; font-style: italic;">1.</span> Programming does support AnYSortOF casing that you&#8217;d like, it makes cross-project work painful. 
<span style="color: #268bd2; font-style: italic;">1.</span> All names (table, column, sequence, index, constraint, role, etc.) should be lowercase with underscores.<span style="color: #268bd2; font-weight: bold; text-decoration: underline;">  </span>
<span style="color: #268bd2; font-style: italic;">1.</span> Table names should be a singular noun that describes one row. &#8220;account&#8221;, not &#8220;accounts&#8221;. Some people prefer plural, we just need a standard, my vote is for singular as it makes SQL a little more natural to read e.g.,

<span style="color: #268bd2; font-weight: bold;">####</span> <span style="color: #268bd2; font-weight: bold;">SQL code:</span>
<span style="color: #268bd2; font-weight: bold;">    SELECT * FROM account WHERE account.balance &gt; 5000;</span>
<span style="color: #268bd2; font-weight: bold;">    </span>

&lt;p&gt;&lt;/p&gt;
<span style="color: #268bd2; font-weight: bold;">###</span> <span style="color: #268bd2; font-weight: bold;">Let's try this in Ecology: e.g.</span>

<span style="color: #268bd2; font-weight: bold;">    SELECT * FROM tree WHERE tree.species = 'Corymbia maculata';</span>
<span style="color: #268bd2; font-weight: bold;">    </span>
<span style="color: #268bd2; font-style: italic;">1.</span> Can't name a table 'Species' then.
<span style="color: #268bd2; font-style: italic;">1.</span> Also Hadley Wickham commented that all names should be lowercase in his <span style="color: #859900; font-weight: bold;">[Video about Tidy  Data]</span><span style="color: #2aa198;">(http://vimeo.com/33727555)</span>.
</pre>

</li>
</ul>
</div>

</div>

<div id="outline-container-5-6" class="outline-4">
<h4 id="sec-5-6"><span class="section-number-4">5.6</span> The instruction list/script</h4>
<div class="outline-text-4" id="text-5-6">




<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">the-instructions-script</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: the-instructions-script</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

    

You may have heard this before, but <span style="color: #859900; font-weight: bold;">[reproducibility is kind of a big deal in computational science]</span><span style="color: #2aa198;">(http://www.sciencemag.org/content/334/6060/1226)</span>.
That means, when you submit your paper, the reviewers and the rest of the world should be able to exactly replicate
the analyses from raw data all the way to final results. If you are trying to be efficient, you will likely perform
some summarization/data analysis steps before the data can be considered tidy. 

The ideal thing for you to do when performing summarization is to create a computer script (in <span style="color: #268bd2; font-weight: bold;">`R`</span>, <span style="color: #268bd2; font-weight: bold;">`Python`</span>, or something else) 
that takes the raw data as input and produces the tidy data you are sharing as output. You can try running your script
a couple of times and see if the code produces the same output. 

In many cases, the person who collected the data has incentive to make it tidy for a statistician to speed the process
of collaboration. They may not know how to code in a scripting language. In that case, what you should provide the statistician
is something called <span style="color: #859900; font-weight: bold;">[pseudocode]</span><span style="color: #2aa198;">(http://en.wikipedia.org/wiki/Pseudocode)</span>. It should look something like:

<span style="color: #268bd2; font-style: italic;">1.</span> Step 1 - take the raw file, run version 3.1.2 of summarize software with parameters a=1, b=2, c=3
<span style="color: #268bd2; font-style: italic;">1.</span> Step 2 - run the software separately for each sample
<span style="color: #268bd2; font-style: italic;">1.</span> Step 3 - take column three of outputfile.out for each sample and that is the corresponding row in the output data set

You should also include information about which system (Mac/Windows/Linux) you used the software on and whether you 
tried it more than once to confirm it gave the same results. Ideally, you will run this by a fellow student/labmate
to confirm that they can obtain the same output file you did. 



</pre>


</div>

</div>

<div id="outline-container-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> What you should expect from the analyst</h3>
<div class="outline-text-3" id="text-5-1">





<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">what-to-expect-from-the-analyst</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: what-to-expect-from-the-analyst</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

    

When you turn over a properly tidied data set it dramatically decreases the workload on the statistician. So hopefully
they will get back to you much sooner. But most careful statisticians will check your recipe, ask questions about
steps you performed, and try to confirm that they can obtain the same tidy data that you did with, at minimum, spot
checks.

You should then expect from the statistician:

<span style="color: #268bd2; font-style: italic;">1.</span> An analysis script that performs each of the analyses (not just instructions)
<span style="color: #268bd2; font-style: italic;">1.</span> The exact computer code they used to run the analysis
<span style="color: #268bd2; font-style: italic;">1.</span> All output files/figures they generated. 

This is the information you will use in the supplement to establish reproducibility and precision of your results. Each
of the steps in the analysis should be clearly explained and you should ask questions when you don't understand
what the analyst did. It is the responsibility of both the statistician and the scientist to understand the statistical
analysis. You may not be able to perform the exact analyses without the statistician's code, but you should be able
to explain why the statistician performed each step to a labmate/your principal investigator. 

</pre>

</div>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Data Receiver</h2>
<div class="outline-text-2" id="text-6">


</div>

<div id="outline-container-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> Data sharing code of conduct</h3>
<div class="outline-text-3" id="text-6-1">

<ul>
<li>Identifying Errors (miscalculations or methodological)
</li>
<li>Uncovering Fraud
</li>
<li>Strike gold? Share the wealth!
</li>
</ul>

</div>

</div>

<div id="outline-container-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> Respond quickly, engage deepy</h3>
<div class="outline-text-3" id="text-6-2">

</div>

</div>

<div id="outline-container-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> Exploratory Data Analysis</h3>
<div class="outline-text-3" id="text-6-3">




<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">--- </span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">eda</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: Exploratory Data Analysis</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

<span style="color: #268bd2; font-style: italic;">-</span> graphs and tables
<span style="color: #268bd2; font-style: italic;">-</span> cross tabulations, balanced?
<span style="color: #268bd2; font-style: italic;">-</span> maps
<span style="color: #268bd2; font-style: italic;">-</span> duplicates
<span style="color: #268bd2; font-style: italic;">-</span> trend, seasonality, variance
<span style="color: #268bd2; font-style: italic;">-</span> sanity checks, plausible values, unlikely combinations

</pre>

</div>

</div>

<div id="outline-container-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> Re-structuring the data to fit a schema</h3>
<div class="outline-text-3" id="text-6-4">





<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">restructuring-the-data</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: restructuring-the-data</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

    
<span style="color: #268bd2; font-style: italic;">-</span> Keep in mind ways to standardise, harmonise the data with other data.
<span style="color: #268bd2; font-style: italic;">-</span> for example convert all variable names to lowercase, and enforce underscores rather than dots in names
<span style="color: #268bd2; font-style: italic;">-</span> Into a spreadsheet take a list of all files, tables, queries, worksheets (using RODBC sqlTables to extract this list from databases or spreadsheets) 
<span style="color: #268bd2; font-style: italic;">-</span> assign a new variable based on the observational types, these will act as an umbrella to collect the <span style="color: #859900; font-weight: bold;">[LPU]</span><span style="color: #2aa198;">(/datasharing/least-publishable-units)</span>.
<span style="color: #268bd2; font-style: italic;">-</span> Then I'd try to carve these umbrella groups into separate LPU ie: Jellybean\_History \_by\_site, Jellybean\_Interval\_Table, Days\_Since\_Jellybean) and Jellybean\_Response.
<span style="color: #268bd2; font-style: italic;">-</span> And then start a script in whatever language (like R),
<span style="color: #268bd2; font-style: italic;">-</span> Structure the script into sections, the first section would be Jellybean, then first subsection Jellybean\_History, then another subsection Jellybean\_Response.
<span style="color: #268bd2; font-style: italic;">-</span> Then move on to the next section/subsection.
<span style="color: #268bd2; font-style: italic;">-</span> Then scroll up and down between sections adding in exploratory code (maps, graphs, cross-tabs) and comments about what you find, think, decide, change in main data files (if appropriate).
<span style="color: #268bd2; font-style: italic;">-</span> Then shuffle these around like moving blocks of a jigsaw puzzle until happy enough to share with someone else.
<span style="color: #268bd2; font-style: italic;">-</span> Do a presentation of the work so far and make notes immediately afterward about things you thought of during the presentation

</pre>

</div>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Acknowledgements</h2>
<div class="outline-text-2" id="text-7">




<pre class="src src-markdown"><span style="color: #268bd2; font-weight: bold;">---</span>
<span style="color: #268bd2;">name</span>: <span style="color: #2aa198;">acknowledgements</span>
<span style="color: #268bd2;">layout</span>: <span style="color: #2aa198;">default</span>
<span style="color: #268bd2; font-weight: bold;">title: acknowledgements</span>
<span style="color: #268bd2; font-weight: bold;">---</span>

<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[Jeff Leek]</span><span style="color: #2aa198;">(http://biostat.jhsph.edu/~jleek/)</span> - Wrote the initial version.
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[L. Collado-Torres]</span><span style="color: #2aa198;">(http://bit.ly/LColladoTorres)</span> - Fixed typos, added links.
<span style="color: #268bd2; font-style: italic;">-</span> <span style="color: #859900; font-weight: bold;">[Nick Reich]</span><span style="color: #2aa198;">(http://people.umass.edu/nick/)</span> - Added tips on storing data as text.


</pre>


</div>
</div>
</div>

</body>
</html>
